(this["webpackJsonpboiler-plate-typescript"]=this["webpackJsonpboiler-plate-typescript"]||[]).push([[0],{14:function(e,t,n){"use strict";(function(e){var n=e.localStorage,r={get:function(e){return n&&n.getItem(e)},set:function(e,t){return n&&n.setItem(e,t)},remove:function(e){return n&&n.removeItem(e)},clear:function(){return n&&n.clear()}};t.a=r}).call(this,n(35))},45:function(e){e.exports=JSON.parse('{"Login":"Login"}')},46:function(e){e.exports=JSON.parse('{"Login":"Anmelden"}')},50:function(e){e.exports=JSON.parse('{"name":"boiler-plate-typescript","version":"0.1.0","homepage":"https://abdulkadir-posul.github.io/react-boiler-plate-typescript/","private":true,"dependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/classnames":"^2.3.1","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","@types/react-redux":"^7.1.18","@types/react-router-dom":"^5.1.8","@types/redux-thunk":"^2.1.0","@ungap/event-target":"^0.2.3","axios":"^0.21.1","classnames":"^2.3.1","gh-pages":"^3.2.3","i18next":"^20.5.0","langmap":"^0.0.16","react":"^17.0.2","react-dom":"^17.0.2","react-i18next":"^11.11.4","react-redux":"^7.2.4","react-router-dom":"^5.2.1","react-scripts":"4.0.3","redux":"^4.1.1","redux-thunk":"^2.3.0","typescript":"^4.1.2","web-vitals":"^1.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},90:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/logo.001dd072.png"},91:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"types",(function(){return F})),n.d(r,"setLoading",(function(){return K}));var a={};n.r(a),n.d(a,"types",(function(){return V})),n.d(a,"init",(function(){return X})),n.d(a,"login",(function(){return Z})),n.d(a,"logout",(function(){return ee})),n.d(a,"userDetails",(function(){return te}));var c=n(0),o=n.n(c),i=n(22),s=n.n(i),u=n(12),l=n(33),d=n(20),f={en:{translation:n(45)},de:{translation:n(46)}};l.a.use(d.e).init({resources:f,lng:"en",fallbackLng:Object.keys(f),keySeparator:!1,interpolation:{escapeValue:!1}});l.a;var j=n(11),p=n(7),b=n(3),O=n(19),h=n(1),g=["isAuthenticated","loginPath"];function v(e){var t=e.isAuthenticated,n=e.loginPath,r=Object(O.a)(e,g),a=Object(b.g)(),c=Object(b.h)();return t?Object(h.jsx)(b.b,Object(p.a)({},r)):(setTimeout((function(){return a.replace(n,{from:c})}),0),null)}var m=["routes"],x=["private","index","path"];function k(e){var t=e.routes,n=Object(O.a)(e,m),r=Object(b.i)().path,a=Object(c.useRef)(null),o=Object(c.useMemo)((function(){return t.map((function(e,t){var o=e.private,i=e.index,s=e.path,u=Object(O.a)(e,x),l=o?v:b.b,d=r.replace(/^\/$/,""),f=s.replace(/^\/$/,""),j="*"===s?s:"".concat(d).concat(f);if(i&&r!==j&&"*"!==j){var g=u.component;a.current=Object(h.jsx)(b.b,{exact:!0,path:r,render:function(){return"redirect"===i?Object(h.jsx)(b.a,{to:{pathname:j}}):Object(h.jsx)(g,{})}})}return Object(c.createElement)(l,Object(p.a)(Object(p.a)(Object(p.a)({},u),n),{},{key:t,path:j}))}))}),[t,n,r]);return Object(h.jsxs)(b.d,{children:[a.current,o]})}var y=n(17),T=n(92),S={name:n(50).description,baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/react-boiler-plate-typescript",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"https://dat.local/api",ttl:{transportList:60},defaultTimezone:"Europe/Berlin",contact:{name:"Transport Team Seven Senders",phone:"+49 30 233218755",email:"operations@sevensenders.com"}},E=n(27),L=n.n(E);function _(){return E.CancelToken.source()}var N,R=n(10),w=n.n(R),P=n(15),C=n(51),U=n(52),I=n(53),A="/token/refresh",D=function(){function e(){Object(C.a)(this,e);var t=S.baseURL;this.injectedInterceptors=!1,this.refreshingToken=!1,this.axios=L.a.create({baseURL:t}),this.eventEmitter=new I.a,this.verifyToken=this.verifyToken.bind(this)}return Object(U.a)(e,[{key:"verifyToken",value:function(e){return e}},{key:"getHeaders",value:function(){return Object(p.a)({},this.axios.defaults.headers.common)}},{key:"listen",value:function(e,t){return this.eventEmitter.addEventListener(e,t)}},{key:"setToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.token=e,this.refreshToken=t,this.axios.defaults.headers.common.Authorization="Bearer ".concat(e)}},{key:"getConfig",value:function(e){var t=e.cancelToken,n={};return t&&t.token&&(n.cancelToken=t.token),n}},{key:"login",value:function(){var e=Object(P.a)(w.a.mark((function e(t,n){var r=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>2&&void 0!==r[2]?r[2]:null,e.next=3,Promise.resolve({data:{token:"my_token",refresh_token:!0}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"userDetails",value:function(){var e=Object(P.a)(w.a.mark((function e(){var t=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:null,e.next=3,Promise.resolve({data:{roles:["admin"]}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"generateToken",value:function(){var e=Object(P.a)(w.a.mark((function e(t){var n,r,a=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,r=this.getConfig({cancelToken:n}),e.next=4,this.axios.post(A,{refresh_token:t},r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),G=n(14),F={SET_LOADING:"SET_LOADING"},K=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:F.SET_LOADING,payload:e}},M=n(13),B=n(28),J=Object(M.a)({},F.SET_LOADING,(function(e,t){return e.inProcess+=t?1:-1,e.inProcess<=0?(e.loading=!1,e.inProcess=0):e.loading=!0,e})),H={loading:!1,inProcess:0},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return Object(B.a)(e,(function(t){return n in J&&J[n](t,r)||e}))},z=new D,V={LOGOUT:"LOGOUT",SET_TOKEN:"SET_TOKEN",SET_USER_ROLES:"SET_USER_ROLES",LOGIN_ERROR:"LOGIN_ERROR"},$=!1,q=function(e,t){return G.a.set("token",e),t&&G.a.set("refreshToken",t),z.setToken(e,t),{type:V.SET_TOKEN,payload:{token:e,refreshToken:t}}},Q=function(e){return{type:V.SET_USER_ROLES,payload:e}},X=function(){return function(e){var t=G.a.get("token"),n=G.a.get("refreshToken"),r="true"===G.a.get("rememberMe");if($||(z.listen("regenerate_success",function(e){return function(t){var n=t.detail,r=n.token,a=n.refresh_token,c="true"===G.a.get("rememberMe");e(q(r,c&&a))}}(e)),z.listen("regenerate_failure",function(e){return function(){e(ee())}}(e)),$=!0),t&&(!r||n))return e(q(t,r&&n)),e(te());G.a.clear()}},Y=function(e){return{type:V.LOGIN_ERROR,payload:e}},Z=function(e,t,n){return function(a){var c=_();return G.a.set("rememberMe",n),a(r.setLoading(!0)),a(Y(null)),z.login(e,t,c).then((function(e){var t=e.data,r=t.token,o=t.refresh_token;a(q(r,n&&o)),a(te(c))})).catch((function(e){var t,n=e.response;a(Y({message:(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Something wrong",status:(null===n||void 0===n?void 0:n.status)||500}))})).finally((function(){a(r.setLoading(!1))})),c}},ee=function(){return function(e){G.a.clear(),e({type:V.LOGOUT})}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){var n=e||_();return t(r.setLoading(!0)),z.userDetails(n).then((function(e){var n=e.data.roles;if(!n||0===n.length)throw new Error("User doesn't have roles");t(Q(n))})).catch((function(e){t(ee())})).finally((function(){n.cancel(),t(r.setLoading(!1))})),n}},ne=(N={},Object(M.a)(N,V.SET_TOKEN,(function(e,t){var n=t.token,r=t.refreshToken,a=void 0===r?null:r;return e.token=n,a&&(e.refreshToken=a),e})),Object(M.a)(N,V.LOGOUT,(function(){return re})),Object(M.a)(N,V.SET_USER_ROLES,(function(e,t){return e.logged=!0,e.roles=t,e})),Object(M.a)(N,V.LOGIN_ERROR,(function(e,t){return e.error=t,e})),Object(M.a)(N,V.SET_FILTERS,(function(e,t){return e.filters=Object(p.a)(Object(p.a)({},e.filters),t),e})),N),re={logged:!1,token:null,refreshToken:null,roles:null,error:null,filters:{dateFrom:"",dateTo:"",id:"",pickUpStations:[],dropOffStations:[]}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return Object(B.a)(e,(function(t){return n in ne&&ne[n](t,r)||e}))};var ce="/login";var oe=[{path:"/logout",component:function(){return Object(u.b)()(a.logout()),Object(h.jsx)(b.a,{to:{pathname:ce}})},exact:!0},{path:"/login",component:function(){var e=Object(T.a)().t,t=Object(u.c)((function(e){return e.user.logged})),n=Object(c.useState)(""),r=Object(y.a)(n,1)[0],o=Object(c.useState)(""),i=(Object(y.a)(o,1)[0],Object(c.useState)(!1)),s=(Object(y.a)(i,1)[0],Object(b.h)()),l=Object(b.g)(),d=Object(u.b)(),f=(s.state||{from:{pathname:"/"}}).from.pathname,j=Object(c.useRef)(null);return Object(c.useEffect)((function(){!t&&d(a.init())}),[d,t]),Object(c.useEffect)((function(){return function(){j.current&&j.current.cancel()}}),[]),t?(setTimeout((function(){return l.replace(f)}),0),null):Object(h.jsxs)("div",{className:"login-page",children:[Object(h.jsx)("h1",{children:S.name}),Object(h.jsx)("input",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"password"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:function(){return function(e){var t=e.username,n=e.password,r=e.rememberMe;j.current&&j.current.cancel(),j.current=d(a.login(t,n,r))}(r)},children:e("Login")})]})},exact:!0},{private:!0,index:"redirect",path:"/sample",component:function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"SamplePage"})})},exact:!0},{private:!0,path:"/newPage",component:function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"NewPage"})})},exact:!0},{path:"*",component:function(){return Object(h.jsx)("div",{children:"Not Found"})}}];function ie(){var e={isAuthenticated:Object(u.c)((function(e){return e.user.logged})),loginPath:ce};return Object(h.jsx)(k,Object(p.a)({routes:oe},e))}function se(){var e=Object(b.h)().pathname;return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var ue=n(55),le=n.n(ue);function de(e){var t=e.altText,r=void 0===t?"Seven Senders":t;return Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)("img",{src:n(90),alt:r})})}function fe(e){var t=e.children;return Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"left",children:Object(h.jsx)(j.b,{to:"/",children:Object(h.jsx)(de,{})})}),Object(h.jsx)("div",{className:"right",children:t})]})})}function je(){return Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)("i",{className:"fa fa-spinner fa-pulse"})})}var pe=n(32),be=n.n(pe);function Oe(e){var t=e.languages,n=e.language,r=e.onSelect,a=Object(c.useState)(!1),o=Object(y.a)(a,2),i=o[0],s=o[1],u=Object(c.useRef)(null),l=Object(c.useMemo)((function(){return t.sort()}),[t]),d=function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r(e),s(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e,t){function n(n){e.current&&!e.current.contains(n.target)&&t()}Object(c.useEffect)((function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}))}(u,(function(){return s(!1)})),Object(h.jsxs)("div",{className:"language-switcher",ref:u,children:[Object(h.jsxs)("button",{className:"selected",onClick:function(e){e.preventDefault(),s(!i)},children:[n.toUpperCase()," ",Object(h.jsx)("i",{className:"fas fa-sort-down"})]}),i&&Object(h.jsx)("div",{className:"languages",children:l.map((function(e,t){return Object(h.jsx)("a",{className:"language ".concat(e),href:"#".concat(e),lang:e,hrefLang:e,onClick:d(e),children:e in be.a?be.a[e].nativeName:e.toUpperCase()},t)}))})]})}function he(e){var t=e.children,n=e.icon,r=e.onClick,a=void 0===r?function(){}:r;return Object(h.jsxs)("button",{className:"icon-button",onClick:a,children:[Object(h.jsx)("i",{className:"fas ".concat(n)})," ",t]})}function ge(e){var t=e.children,n=Object(u.c)((function(e){return e.user.logged})),r=Object(u.c)((function(e){return e.loader.loading})),a=Object(T.a)(),c=a.t,o=a.i18n,i=o.language,s=o.languages,l=le()("page-container",{"guest-user":!n}),d=function(){var e=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.changeLanguage(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:l,children:[Object(h.jsxs)(fe,{children:[Object(h.jsx)(Oe,{language:i,languages:s,onSelect:d}),n&&Object(h.jsxs)("div",{children:[Object(h.jsx)(j.b,{to:"/logout",children:Object(h.jsx)(he,{icon:"fa-sign-out-alt",children:c("Logout")})}),Object(h.jsx)(j.b,{to:"newPage",children:"newPage"})]})]}),Object(h.jsx)("main",{children:t}),r&&Object(h.jsx)(je,{})]})}var ve=function(){return Object(h.jsxs)(j.a,{children:[Object(h.jsx)(se,{}),Object(h.jsx)(ge,{children:Object(h.jsx)(ie,{})})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},xe=n(21),ke=n(56),ye=Object(xe.b)({loader:W,user:ae}),Te=xe.c,Se=function(e){var t=Object(xe.a)(ke.a),n=Te(t);return Object(xe.d)(ye,e,n)}();s.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(u.a,{store:Se,children:Object(h.jsx)(ve,{})})}),document.getElementById("root")),me()}},[[91,1,2]]]);
//# sourceMappingURL=main.5ccfcc53.chunk.js.map